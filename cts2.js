!function(e,t,n){n=e.ex2cts||{},e.ex2cts||(e.ex2cts=n),n.id="",n.version="1.0.8",n.trk_url="https://cts2.exelbid.com/v2/cts",n.clk_id_name="clk_id",n.clk_id_cookie_name="ex2_clk_id",n.cmd=n.cmd||[],n.domain="",n.gen_key=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz012345678",t="",n=0;20>n;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},n.set_cookie=function(e,i,r){var o=new Date;o.setTime(o.getTime()+60*r*60*1e3);var c=o.toUTCString(),_=n.domain,a=e+"="+escape(i)+(c?";expires="+c:"")+";path=/"+(_?";domain="+_:"");t.cookie=a},n.get_cookie=function(e){var n=t.cookie.indexOf(e+"=");if(_start_idx=n+e.length+1,!n&&e!=t.cookie.substring(0,e.length))return null;if(-1==n)return null;var i=t.cookie.indexOf(";",_start_idx);return-1==i&&(i=t.cookie.length),unescape(t.cookie.substring(_start_idx,i))},n.get_click_id_from_url=function(){try{if(!e.location||!e.location.search)return"";for(var i=e.location.search.substring(1).split("&"),r=0;r<i.length;r++){if((_=i[r].split("="))[0]==n.clk_id_name)if(""!=(a=_[1]))return a}if(!t.referrer)return"";var o=t.referrer,c=o.indexOf("?");if(c)for(i=o.substr(c+1).split("&"),r=0;r<i.length;r++){var _,a;if((_=i[r].split("="))[0]==n.clk_id_name)if(""!=(a=_[1]))return a}}catch(e){return""}return""},n.burn_click_id=function(){var e=n.get_click_id_from_url();""!=e&&n.set_cookie(n.clk_id_cookie_name,e,2160)},n.get_click_id=function(){var e=n.get_cookie(n.clk_id_cookie_name);return e||""},n.get_session=function(){return n.get_cookie("exelbid-uid")||n.set_cookie("exelbid-uid",n.gen_key(),2160),n.get_cookie("exelbid-uid")},n.peek=function(){return element=null==n.cmd[0]?null:n.cmd[0],element},n.dequeue_cmd=function(){return element=n.peek(),n.cmd.shift(),element},n.addEvent=function(e){return e.addEventListener?function(e,t,n,i){e.addEventListener(t,n,i)}:e.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:function(e,t,n){e["on"+t]=n}}(e),n.getElementsStartsWithId=function(e){for(var n,i=t.body.getElementsByTagName("*"),r=[],o=0,c=i.length;o<c;o++)(n=i[o]).id.substr(0,e.length)==e&&r.push(n);return r};var i=function(e){this.key=e;var t=this.get_base_url("log");this.request(t)};for(i.prototype.get_base_url=function(e){return n.trk_url+"?key="+this.key+"&cmd="+e+"&domain="+n.domain},i.prototype.request=function(i){var r=i+"&session="+n.get_session(),o=encodeURIComponent(n.get_click_id());if(r+="&sv="+n.version,o&&(r+="&clk_id="+o),e.screen){var c=e.screen;c.availWidth&&c.availHeight&&(r+="&asw="+c.availWidth+"&ash="+c.availHeight)}t.referrer&&(r+="&ref="+encodeURIComponent(t.referrer)),t.charset&&(r+="&charset="+encodeURIComponent(t.charset)),""!=n.get_click_id_from_url()&&(r+="&dr=Y"),r+="&rand="+(new Date).getTime(),new Image(1,1).src=r},i.prototype.view=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&product_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.cart=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&product_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.wish=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&product_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.registration=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&order_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.install=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&order_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.purchase=function(e){var t=this.get_base_url(e[0]);e[1]&&(e[1].value&&(t+="&value="+encodeURIComponent(e[1].value)),e[1].currency&&(t+="&currency="+encodeURIComponent(e[1].currency)),e[1].order_id&&(t+="&order_id="+encodeURIComponent(e[1].order_id)),e[1].product_id&&(t+="&product_id="+encodeURIComponent(e[1].product_id))),this.request(t)},i.prototype.track=function(e){var t=this.get_base_url("track");e[1]&&(t+="&product_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.custom=function(e){this.get_base_url(e[0])},n.track_npay=function(e){if(e[1]){var t=n.getElementsStartsWithId("NPAY_BUY_LINK_IDNC_ID_");if(t&&t.length>0&&n.addEvent(t[0],"click",function(){n.push("track",e[1])}),e[2]){var i=n.getElementsStartsWithId("NPAY_WISH_LINK_IDNC_ID_");if(i&&i.length>0&&n.addEvent(i[0],"click",function(){n.push("track",e[2])}),e[3]){var r=n.getElementsStartsWithId("NPAY_TALK_LINK_IDNC_ID_");r&&r.length>0&&n.addEvent(r[0],"click",function(){n.push("track",e[3])})}}}},n.npay_async=function(e,t){if(t[1]&&"function"==typeof t[1]){var i="";if("buy"==e)i="NPAY_BUY_LINK_IDNC_ID_";else if("wish"==e)i="NPAY_WISH_LINK_IDNC_ID_";else{if("talk"!=e)return void console.error("invalid async cmd");i="NPAY_TALK_LINK_IDNC_ID_"}var r=n.getElementsStartsWithId(i);r&&r.length>0&&n.addEvent(r[0],"click",function(){t[1]()})}},i.prototype.track_npay=function(e){setTimeout(function(){n.track_npay(e)},700)},i.prototype.npay_async_buy=function(e){setTimeout(function(){n.npay_async("buy",e)},700)},i.prototype.npay_async_wish=function(e){setTimeout(function(){n.npay_async("wish",e)},700)},i.prototype.npay_async_talk=function(e){setTimeout(function(){n.npay_async("talk",e)},700)},i.prototype.run_cmd=function(e){if(e.length){var t=e[0];this[t]?(this[t],this[t](e)):this.custom(e)}},n.run_cmd=function(e){if(e.length){var t=e[0];if("init"==t){var r=e[1];if(!r)return;return e[2]&&(n.domain=e[2]),n.ex2_obj=new i(r),void n.burn_click_id()}n.ex2_obj?n.ex2_obj.run_cmd(e):console.error("is not init ex2obj "+t)}};_args=n.dequeue_cmd();)"object"==typeof _args&&n.run_cmd(_args);n.callFunc=function(){arguments&&n.run_cmd(arguments)}}(window,document);